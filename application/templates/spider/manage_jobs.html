<head>
	<title>Manage Jobs</title>
	<style>
		table {
			font-family: arial, sans-serif;
			border-collapse: collapse;
			width: 100%;
		}

		td, th {
			border: 1px solid #dddddd;
			text-align: left;
			padding: 8px;
		}

		tr:nth-child(even) {
			background-color: #dddddd;
		}

		.table-responsive {
			max-height:300px;
		}
	</style>
</head>

{% extends "base.html" %}

{% block body %}

<!--Page content-->
<div class="container mt-5">
	<h1>Manage Jobs</h1>

	<div class="mb-3">
		<h5>Manage your Spider jobs here.</h5>
		<p class="title">To get more infomation regarding the jobid's as well as its logs
		, click <a href="http://localhost:6800/jobs" target="http://localhost:6800/jobs">here.</a> </p>

		<h2 class="title">Running </h2>

		<div class="table-responsive">
			<table class="table">
				<tr>
					<th>Initiation Date</th>
						<th>Spider</th>
						<th>URL</th>
						<th>Depth</th>
						<th>ID</th>
				</tr>
				{% for running in runningDict %}
				<tr>
					<td>{{ running.datetime }}</td>
					<td>{{ running.spider }}</td>
					<td>{{ running.url }}</td>
					<td>{{ running.depth }}</td>
					<td>{{ running.jobid }}</td>
				</tr>
				{% endfor %} 
			</table>
		</div>

		<h2 class="title">Completed </h2>

		<div class="table-responsive">
			<table class="table">
				<tr>
					<th>Initiation Date</th>
					<th>Spider</th>
					<th>URL</th>
					<th>Depth</th>
					<th>ID</th>
				</tr>
				{% for finished in finishedDict %}
				<tr>
					<td>{{ finished.datetime }}</td>
					<td>{{ finished.spider }}</td>
					<td>{{ finished.url }}</td>
					<td>{{ finished.depth }}</td>
					<td>{{ finished.jobid }}</td>
				</tr>
				{% endfor %}
			</table>
		</div>
		<form action="/manage_jobs" method="POST">
			<select name="filter">
				<option value="all">All</option>
				{% for finished in finishedDict %}
				<option value="{{finished}}">{{finished}}</option>
				{% endfor %}
			</select>
			<button type="submit">Filter</button>
		</form>
	</div>
</div>

{% endblock %}
